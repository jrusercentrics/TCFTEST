<!DOCTYPE html>
<html lang="en">
<head>

  <script id="usercentrics-cmp" src="https://app.usercentrics.eu/browser-ui/latest/loader.js" data-settings-id="qb68st2FBJbSzx" data-tcf-enabled async></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width" , initial-scale="1.0">
    <title>My CMP v2 Testpage</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<!-- End Google Tag Manager -->
  </head>
 

    
  
</head>
<body>
GLOBEX
<a href="#" class="btn btn-primary">stay here</a>
<a href="https://www.cnn.com" class="btn btn-primary">go to an external page</a>
    <h1>Usercentrics CMP V2 Test Page</h1>
    <img id="imgbtn" src="https://usercentrics.com/wp-content/uploads/2020/04/190208-UCS-Logo-800px.png" alt="uc-logo">
</body>
<script>
  (function runConsentCheck() {
  // 1. Check IAB GVL vendor (ID 967)
  if (typeof __tcfapi === 'function') {
    __tcfapi('getTCData', 2, function (tcData, success) {
      if (success) {
        const tcfConsent = tcData.vendor?.consents?.[967] === true;
        console.log("[TCF] Consent for IAB vendor 967:", tcfConsent);
      } else {
        console.warn("[TCF] Failed to get TCData");
      }
    });
  } else {
    console.warn("[TCF] __tcfapi not available");
  }

  // 2. Listen to UC service consent event
  window.addEventListener('UC_UI_CONSENT_STATUS', function (e) {
    const services = e.detail?.consents?.services || [];
    const ucConsent = services.find(s => s.id === 'BySu54sOjZQ');
    if (ucConsent) {
      console.log("[UC] Consent for Usercentrics vendor BySu54sOjZQ:", ucConsent.consent);
    } else {
      console.warn("[UC] Vendor BySu54sOjZQ not found in services consents");
    }
  });

  console.log("[INIT] Waiting for both TCF and UC consent info...");
})();
</script>
</html>
